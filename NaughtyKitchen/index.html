<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Naughty Kitchen</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <script src="TemplateData/UnityProgress.js"></script>
    <script src="Build/UnityLoader.js"></script>
    <script>
      var unityInstance = UnityLoader.instantiate("unityContainer", "Build/NaughtyKitchen.json", {onProgress: UnityProgress});

      function Ads_RewardVideo(str) {
          window.h5sdk.adBreak({
            type: "reward",
            name: "my_reward",
            beforeAd: () => {
              console.log("beforeAd");
            },
            afterAd: () => {

              console.log("afterAd");
            },
            adDismissed: () => {
              console.log("adDismissed");
            },
            adViewed: () => {
              console.log("adViewed");
            },
            beforeReward: (showAdFn) => {
              console.log("beforeReward");
              showAdFn();
            },
            adBreakDone: (placementInfo) => {
              if (placementInfo.breakStatus === "dismissed") {
                console.log("取消观看" + placementInfo.breakStatus);
                return;
              } else if (placementInfo.breakStatus !== "viewed") {
                console.log("广告异常" + placementInfo.breakStatus);
                unityInstance.SendMessage("GameManager", "VideoError")
                return;
              }
              console.log(str+"发放奖励");
              if(str=="DoubleSpeed"){   unityInstance.SendMessage("BoostManager", "DoubleSpeedRewardCallBack");}
              if(str=="GetDiamond"){   unityInstance.SendMessage("FreeCoin", "GetDiamondCallBack");}
              if(str=="UnlockKitchen"){   unityInstance.SendMessage("Barrier", "UnlockKitchenCallBack");}
            },
          });

        }
        function Ads_Banner() {

        }
        function Ads_Insert() {
          window.h5sdk.adBreak({
            type: "start", // type请按照文档选择合适的https://developers.google.com/ad-placement/docs/placement-types
            name: "my_start",
            beforeAd: () => {
              console.log("beforeAd");
            },
            afterAd: () => {
              console.log("afterAd");
            },
            adBreakDone: () => {
              // this.score = 0;
              // this.erase();
              // this.play();
            },
          });
        }
        
    </script>
  </head>
  <div class="webgl-content">
    <div id="unityContainer" style="width:  100vw; height: 92vh"></div>

    <script>//这个GA直接复制就可以。
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-QZ9RJWFBXE');
    </script>
    
    
    <script>window.h5sdk.init(4213388, "10vw", "10vw", "", "", {
      float: {
        env: "", // Float广告请求预发环境，游戏正式上线前请设为env:""
      },
      ga: {
        id: "G-QZ9RJWFBXE", // 运营给到的ID应该是UA-XXXXXXXXX-XX格式
      },
      adsense: {
        client: "ca-pub-2270136017335510",
        // "data-adbreak-test": "on",//正式广告需去除   data-adbreak-test ="on"
        "data-ad-frequency-hint":"45",

        callback: () => {
          window.h5sdk.athenaSend("game_start", "my_flip_coin_game"); //开始游戏自定义埋点
          window.h5sdk.adConfig({
            preloadAdBreaks: "on",
            onReady: () => {
              // 不要在这里初始化游戏，因为onReady有失败的情况！！！
              // 展示开屏广告
              // 当广告展示失败错误为notReady, timeout, noAdPreloaded, other的时候，会展示兜底广告
              window.h5sdk.adBreak({
                type: "preroll",
                name: "my_preroll",
                adBreakDone: () => {}, // 也不要在这里初始化游戏，因为用户不关闭广告，则游戏无法初始化！！！
              });
            },
          });
        },

      },
    });</script>
  </div>>
</html>
